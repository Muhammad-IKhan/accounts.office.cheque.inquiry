<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Meta tags to prevent caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Cheque Inquiry System</title>
    <link type="text/css" rel="stylesheet" href="styles.css" />
    <style></style>
    <script>
      // Function to force refresh the page cache
      function forceRefresh() {
        // Current timestamp to make URL unique and bypass cache
        const timestamp = new Date().getTime();
        // Refresh the page with a cache-busting parameter
        window.location.href = window.location.pathname + '?refresh=' + timestamp;
      }
      // Auto refresh cache when page loads
      window.addEventListener('load', function() {
        // Check if this is already a refreshed page (to avoid refresh loops)
        if (!window.location.href.includes('?refresh=')) {
          forceRefresh();
        }
        
        // Update the date and time display
        updateDateTime();
        // Set interval to update time every minute
        setInterval(updateDateTime, 60000);
        
        // Store last refresh time
        const refreshTime = new Date();
        document.getElementById('lastRefreshTime').textContent = formatTime(refreshTime);
      });
      
      // Function to update date and time
      function updateDateTime() {
        const now = new Date();
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        
        document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', dateOptions);
        document.getElementById('currentTime').textContent = formatTime(now);
      }
      
      // Format time as HH:MM AM/PM
      function formatTime(date) {
        return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      }
      // Set up hourly refresh
      setInterval(function() {
        forceRefresh();
      }, 3600000); // 3600000 ms = 1 hour
      
      // Toggle dark mode
      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
          });
          
          // Check for saved theme preference
          if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
          }
        }
        
        // Scroll to top button functionality
        const scrollToTopBtn = document.getElementById('scrollToTop');
        if (scrollToTopBtn) {
          scrollToTopBtn.addEventListener('click', function() {
            window.scrollTo({
              top: 0,
              behavior: 'smooth'
            });
          });
        }
      });
    </script>
  </head>
  <body>
    <div class="container animate-fade-in">
      <!-- Header -->
      <div class="header">
        <div class="header-content">
          <h1>Cheque Inquiry System</h1>
          <span>Board of Intermediate & Secondary Education Bannu</span>
        </div>
        
        <div class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </div>
        
        <!-- Date time display -->
        <div class="datetime-display animate-slide-up">
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <span id="currentDate">Thursday, April 10, 2025</span>
          </span>
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span id="currentTime">12:00 PM</span>
          </span>
        </div>
      </div>
      
      <!-- Last update notice -->
      <div class="last-update-notice animate-slide-up">
        <h4>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          Last Updated
        </h4>
        <p>This page was last refreshed at <span id="lastRefreshTime">12:00 PM</span>. Data is automatically updated hourly.</p>
      </div>

      <!-- Interface Selection -->
      <div class="controls-grid">
        <div class="filter-box">
          <label for="rowsPerPage">Interface Selection</label>
          <select id="rowsPerPage">
            <option value="5">Mobile</option>
            <option value="10" selected>Desktop</option>
            <option value="25">Office</option>
          </select>
        </div>
        
        <div class="filter-box">
          <label for="statusFilter">Filter by Status</label>
          <select id="statusFilter">
            <option value="all">All Statuses</option>
            <option value="processing">Processing</option>
            <option value="In Work: Not Signed Yet">In Work</option>          
            <option value="Cheque Ready">Cheque Ready</option>
            <option value="despatched">Despatched</option>
          </select>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls animate-slide-up">
        <div class="filter-box">
          <label for="narCategory">Bill Category</label>
          <select id="narCategory">
            <option value="all" selected>Search in All</option>
            <option value="TA/DA TO SUPERVISORY STAFF SSC EXAM:">
              Supervisory Staff SSC
            </option>
            <option value="TA/DA TO PRACTICAL EXMR: SSC">
              Practical Staff SSC
            </option>
            <option value="TA/DA TO INSEPCTORS SSC">
              Inspections Staff SSC
            </option>
            <option value="REMUNERATION RES: INSPECTORS">
              Resedent Inspectors
            </option>
            <option value="LABORATORY CHARGES">Laboratory Charges</option>
            <option value="SECRECY">Secrecy Bills</option>
            <option value="TA/DA TO SUPERVISORY STAFF HSSC EXAM:">
              Supervisory Staff HSSC
            </option>
            <option value="TA/DA TO PRACTICAL EXMR: HSSC">
              Practical Staff HSSC
            </option>
            <option value="TA/DA TO INSEPCTORS HSSC">
              Inspections Staf HSSC
            </option>
            <option value="TA/DA GENERAL">TA/DA General</option>
            <option value="EXPIRED CHECK RENEWED">Check Renewal</option>
            <option value="REFUND OF FEE">Refund Fee</option>
            <option value="SCHOLARSHIP">SCHOLARSHIPS</option>
            <option value="SPORTS">SPORTS</option>
            <option value="HONORARIA">Honoraria & Others</option>
          </select>
        </div>

        <div class="search-box">
          <label for="search">Search by Name or School</label>
          <input
            type="text"
            id="search"
            placeholder="Enter your name or school name..."
          />
        </div>

        <button id="searchBtn" class="btn-primary">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          Search
        </button>
      </div>

      <!-- Loading indicator -->
      <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <p>Searching...</p>
      </div>

      <!-- Empty State -->
      <div id="emptyState" class="empty-state">
        <div class="empty-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="48"
            height="48"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="9" y1="9" x2="15" y2="15"></line>
            <line x1="15" y1="9" x2="9" y2="15"></line>
          </svg>
        </div>
        <h3>Welcome to Office for Live Inquiry, Updation and Information</h3>
        <p>Use the search and filters above to find your cheque information.</p>
      </div>

      <!-- No Results State -->
      <div id="noResults" class="no-results">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          style="margin-bottom: 16px; color: var(--text-secondary)"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <h3>No Results Found</h3>
        <p>Try adjusting your search criteria or filters.</p>
      </div>

      <!-- Alert for system notifications -->
      <div class="alert alert-danger" id="systemAlert" style="display: none;">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <div>
          <strong>System Notice:</strong>
          <span id="alertMessage">The system is currently being updated with the latest cheque information.</span>
        </div>
      </div>

      <!-- Table -->
      <div id="tableContainer" class="table-container">
        <table>
          <thead>
            <tr>
              <th data-column="NARRATION">
                NAME AND ADDRESS<span class="sort-icon">↓</span>
              </th>
              <th data-column="CHEQ_NO">
                Cheque #<span class="sort-icon"></span>
              </th>
              <th data-column="DD">Status<span class="sort-icon"></span></th>
            </tr>
          </thead>
          <tbody id="checksTable"></tbody>
        </table>
      </div>

      <!-- Results -->
      <div id="result" class="result-container">
        <span id="resultContainer"></span>
      </div>

      <!-- Pagination -->
      <div id="paginationContainer" class="pagination-controls">
        <button class="page-btn" id="prevPage" disabled>Previous</button>
        <div id="pagination" class="pagination-controls"></div>
        <button class="page-btn" id="nextPage">Next</button>
      </div>
    </div>

    <!-- Floating Action Button for Mobile -->
    <div class="fab-container">
      <div class="fab" id="scrollToTop">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
      </div>
    </div>
    <!-- Scripts -->
    <script src="scripts/index.js"></script>
  </body>
</html>
